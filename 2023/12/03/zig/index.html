<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="The content is based on the official Zig documentation. Hello, Worldconst std &#x3D; @import(&quot;std&quot;);  pub fn main() !void &#123;     const stdout &#x3D; std.io.getStdOut().writer();     try stdout.print(&quot;Hello,">
<meta property="og:type" content="article">
<meta property="og:title" content="Getting Started with Zig for Developers Experienced with Other Languages">
<meta property="og:url" content="https://lnxpgn.github.io/2023/12/03/zig/index.html">
<meta property="og:site_name" content="竹里馆">
<meta property="og:description" content="The content is based on the official Zig documentation. Hello, Worldconst std &#x3D; @import(&quot;std&quot;);  pub fn main() !void &#123;     const stdout &#x3D; std.io.getStdOut().writer();     try stdout.print(&quot;Hello,">
<meta property="og:locale">
<meta property="article:published_time" content="2023-12-02T16:00:00.000Z">
<meta property="article:modified_time" content="2023-12-08T09:09:50.000Z">
<meta property="article:author" content="lnxpgn">
<meta property="article:tag" content="Zig">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Getting Started with Zig for Developers Experienced with Other Languages</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="竹里馆" type="application/atom+xml">
<link rel="alternate" href="/rss.xml" title="竹里馆" type="application/rss+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/categories/">Categories</a></li><!--
     --><!--
       --><li><a href="/tags/">Tags</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2023/12/09/python-modules-and-packages/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2023/11/26/how-to-deploy-python-web-applications/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://lnxpgn.github.io/2023/12/03/zig/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://lnxpgn.github.io/2023/12/03/zig/&text=Getting Started with Zig for Developers Experienced with Other Languages"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://lnxpgn.github.io/2023/12/03/zig/&title=Getting Started with Zig for Developers Experienced with Other Languages"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://lnxpgn.github.io/2023/12/03/zig/&is_video=false&description=Getting Started with Zig for Developers Experienced with Other Languages"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Getting Started with Zig for Developers Experienced with Other Languages&body=Check out this article: https://lnxpgn.github.io/2023/12/03/zig/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://lnxpgn.github.io/2023/12/03/zig/&title=Getting Started with Zig for Developers Experienced with Other Languages"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://lnxpgn.github.io/2023/12/03/zig/&title=Getting Started with Zig for Developers Experienced with Other Languages"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://lnxpgn.github.io/2023/12/03/zig/&title=Getting Started with Zig for Developers Experienced with Other Languages"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://lnxpgn.github.io/2023/12/03/zig/&title=Getting Started with Zig for Developers Experienced with Other Languages"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://lnxpgn.github.io/2023/12/03/zig/&name=Getting Started with Zig for Developers Experienced with Other Languages&description=&lt;p&gt;The content is based on &lt;a href=&#34;https://ziglang.org/documentation/master/&#34;&gt;the official Zig documentation&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;Hello-World&#34;&gt;&lt;a href=&#34;#Hello-World&#34; class=&#34;headerlink&#34; title=&#34;Hello, World&#34;&gt;&lt;/a&gt;Hello, World&lt;/h2&gt;&lt;pre class=&#34;line-numbers language-zig&#34; data-language=&#34;zig&#34;&gt;&lt;code class=&#34;language-zig&#34;&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; std &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;@import&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;std&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;token keyword&#34;&gt;pub&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;&lt;span class=&#34;token operator&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;token builtin-type keyword&#34;&gt;void&lt;/span&gt;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;
    &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; stdout &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; std&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;io&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;getStdOut&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;writer&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;token keyword&#34;&gt;try&lt;/span&gt; stdout&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;Hello, &amp;#123;s&amp;#125;!\n&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;world&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span aria-hidden=&#34;true&#34; class=&#34;line-numbers-rows&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;!void&lt;/code&gt; tells the Zig compiler that the function will either return an error or a value. It is an error union, the full form is &lt;code&gt;&amp;lt;error set type&amp;gt;!&amp;lt;any data type&amp;gt;&lt;/code&gt;, combining an &lt;em&gt;Error Set Type&lt;/em&gt; (An error set is like an enum) and any other data type.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;!void&lt;/code&gt; , the error set type is not explicitly written on the left side of the &lt;code&gt;!&lt;/code&gt; operator. &lt;/p&gt;
&lt;p&gt;The &lt;a href=&#34;https://ziglang.org/documentation/master/#try&#34;&gt;try&lt;/a&gt; expression evaluates the result of &lt;code&gt;stdout.print&lt;/code&gt;. If the result is an error, then the &lt;code&gt;try&lt;/code&gt; expression will return from &lt;code&gt;main&lt;/code&gt; with the error. Otherwise, the program will continue. &lt;/p&gt;
&lt;pre class=&#34;line-numbers language-zig&#34; data-language=&#34;zig&#34;&gt;&lt;code class=&#34;language-zig&#34;&gt;&lt;span class=&#34;token comment&#34;&gt;// top-level declarations are order-independent&lt;/span&gt;
&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; print &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; std&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;debug&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;print&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; std &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;@import&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;std&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;token comment&#34;&gt;// std.debug.print cannot fail, so the return type is void, not !void&lt;/span&gt;
&lt;span class=&#34;token keyword&#34;&gt;pub&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;&lt;span class=&#34;token builtin-type keyword&#34;&gt;void&lt;/span&gt;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;
    &lt;span class=&#34;token comment&#34;&gt;// must have &#34;.&amp;#123;&amp;#125;&#34;, std.debug.print needs two arguments&lt;/span&gt;
    &lt;span class=&#34;token function&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;Hello, world\n&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span aria-hidden=&#34;true&#34; class=&#34;line-numbers-rows&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://lnxpgn.github.io/2023/12/03/zig/&t=Getting Started with Zig for Developers Experienced with Other Languages"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Hello-World"><span class="toc-number">1.</span> <span class="toc-text">Hello, World</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Zig-Test"><span class="toc-number">2.</span> <span class="toc-text">Zig Test</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Comments"><span class="toc-number">3.</span> <span class="toc-text">Comments</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Integers"><span class="toc-number">4.</span> <span class="toc-text">Integers</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Floats"><span class="toc-number">5.</span> <span class="toc-text">Floats</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#String"><span class="toc-number">6.</span> <span class="toc-text">String</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Optionals"><span class="toc-number">7.</span> <span class="toc-text">Optionals</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Assignment"><span class="toc-number">8.</span> <span class="toc-text">Assignment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Operators"><span class="toc-number">9.</span> <span class="toc-text">Operators</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Arrays"><span class="toc-number">10.</span> <span class="toc-text">Arrays</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Slices"><span class="toc-number">11.</span> <span class="toc-text">Slices</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vectors"><span class="toc-number">12.</span> <span class="toc-text">Vectors</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pointers"><span class="toc-number">13.</span> <span class="toc-text">Pointers</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#struct"><span class="toc-number">14.</span> <span class="toc-text">struct</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#enum"><span class="toc-number">15.</span> <span class="toc-text">enum</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#union"><span class="toc-number">16.</span> <span class="toc-text">union</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#opaque"><span class="toc-number">17.</span> <span class="toc-text">opaque</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Blocks"><span class="toc-number">18.</span> <span class="toc-text">Blocks</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shadowing"><span class="toc-number">19.</span> <span class="toc-text">Shadowing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Variables"><span class="toc-number">20.</span> <span class="toc-text">Variables</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#switch"><span class="toc-number">21.</span> <span class="toc-text">switch</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#while"><span class="toc-number">22.</span> <span class="toc-text">while</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#for"><span class="toc-number">23.</span> <span class="toc-text">for</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#if"><span class="toc-number">24.</span> <span class="toc-text">if</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#defer"><span class="toc-number">25.</span> <span class="toc-text">defer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Functions"><span class="toc-number">26.</span> <span class="toc-text">Functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Errors"><span class="toc-number">27.</span> <span class="toc-text">Errors</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Casting"><span class="toc-number">28.</span> <span class="toc-text">Casting</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#comptime"><span class="toc-number">29.</span> <span class="toc-text">comptime</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Memory"><span class="toc-number">30.</span> <span class="toc-text">Memory</span></a></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        Getting Started with Zig for Developers Experienced with Other Languages
    </h1>



    <div class="meta">
      <!-- <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">lnxpgn</span>
      </span> -->
      
    <div class="postdate">
      
        <time datetime="2023-12-02T16:00:00.000Z" class="dt-published" itemprop="datePublished">2023-12-03</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/Tech/">Tech</a>
    </div>


      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/Zig/" rel="tag">Zig</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <p>The content is based on <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/">the official Zig documentation</a>.</p>
<h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello, World"></a>Hello, World</h2><pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">const</span> std <span class="token operator">=</span> <span class="token builtin">@import</span><span class="token punctuation">(</span><span class="token string">"std"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token class-name"><span class="token operator">!</span><span class="token builtin-type keyword">void</span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> stdout <span class="token operator">=</span> std<span class="token punctuation">.</span>io<span class="token punctuation">.</span><span class="token function">getStdOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">writer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> stdout<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Hello, &#123;s&#125;!\n"</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">&#123;</span><span class="token string">"world"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>!void</code> tells the Zig compiler that the function will either return an error or a value. It is an error union, the full form is <code>&lt;error set type&gt;!&lt;any data type&gt;</code>, combining an <em>Error Set Type</em> (An error set is like an enum) and any other data type.</p>
<p><code>!void</code> , the error set type is not explicitly written on the left side of the <code>!</code> operator. </p>
<p>The <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#try">try</a> expression evaluates the result of <code>stdout.print</code>. If the result is an error, then the <code>try</code> expression will return from <code>main</code> with the error. Otherwise, the program will continue. </p>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// top-level declarations are order-independent</span>
<span class="token keyword">const</span> print <span class="token operator">=</span> std<span class="token punctuation">.</span>debug<span class="token punctuation">.</span>print<span class="token punctuation">;</span>
<span class="token keyword">const</span> std <span class="token operator">=</span> <span class="token builtin">@import</span><span class="token punctuation">(</span><span class="token string">"std"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// std.debug.print cannot fail, so the return type is void, not !void</span>
<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">void</span></span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// must have ".&#123;&#125;", std.debug.print needs two arguments</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Hello, world\n"</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<span id="more"></span>
<h2 id="Zig-Test"><a href="#Zig-Test" class="headerlink" title="Zig Test"></a>Zig Test</h2><pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// testing_introduction.zig</span>

<span class="token keyword">const</span> std <span class="token operator">=</span> <span class="token builtin">@import</span><span class="token punctuation">(</span><span class="token string">"std"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> expect <span class="token operator">=</span> std<span class="token punctuation">.</span>testing<span class="token punctuation">.</span>expect<span class="token punctuation">;</span>

<span class="token keyword">test</span> <span class="token string">"expect addOne adds one to 41"</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">try</span> <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">addOne</span><span class="token punctuation">(</span><span class="token number">41</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// A test name can also be written using an identifier</span>
<span class="token keyword">test</span> <span class="token class-name">addOne</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">try</span> <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">addOne</span><span class="token punctuation">(</span><span class="token number">41</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">fn</span> <span class="token function">addOne</span><span class="token punctuation">(</span>number<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> number <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># run the code directly</span>
zig <span class="token builtin class-name">test</span> testing_introduction.zig<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>Test declarations can be written in the same file, where code under test is written, or in a separate Zig source file.</p>
<p>Since test declarations are top-level declarations, they are order-independent and can be written before or after the code under test.</p>
<blockquote>
<p>We can easily run our testing code like this, no need to compile it first.</p>
</blockquote>
<h2 id="Comments"><a href="#Comments" class="headerlink" title="Comments"></a>Comments</h2><p>No multiline comments in Zig.</p>
<p>Zig supports 3 types of comments：</p>
<ul>
<li><p>Normal comments.</p>
<p>Begins with <code>//</code>.</p>
</li>
<li><p>Doc comments</p>
<p>Begins with exactly three slashes (i.e.<code>///</code>).</p>
</li>
<li><p>Top-level doc comments</p>
<p>Begins with <code>//!</code>. It documents the current module.</p>
</li>
</ul>
<p>The last two are used by the compiler to generate the package documentation.</p>
<blockquote>
<p>No <code>/*...*/</code>.</p>
</blockquote>
<h2 id="Integers"><a href="#Integers" class="headerlink" title="Integers"></a>Integers</h2><pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// underscores may be placed as a visual separator</span>
<span class="token keyword">const</span> one_billion <span class="token operator">=</span> 1_000_000_000<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>Zig supports arbitrary bit-width integers, the identifier <code>i7</code> refers to a signed 7-bit integer.</p>
<h2 id="Floats"><a href="#Floats" class="headerlink" title="Floats"></a>Floats</h2><p>There is no syntax for NaN, infinity, or negative infinity. For these special values, one must use the standard library:</p>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">const</span> std <span class="token operator">=</span> <span class="token builtin">@import</span><span class="token punctuation">(</span><span class="token string">"std"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> inf <span class="token operator">=</span> std<span class="token punctuation">.</span>math<span class="token punctuation">.</span><span class="token function">inf</span><span class="token punctuation">(</span><span class="token builtin-type keyword">f32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> negative_inf <span class="token operator">=</span> <span class="token operator">-</span>std<span class="token punctuation">.</span>math<span class="token punctuation">.</span><span class="token function">inf</span><span class="token punctuation">(</span><span class="token builtin-type keyword">f64</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> nan <span class="token operator">=</span> std<span class="token punctuation">.</span>math<span class="token punctuation">.</span><span class="token function">nan</span><span class="token punctuation">(</span><span class="token builtin-type keyword">f128</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><p>Zig has no concept of strings. String literals are <strong>const pointers</strong> to null-terminated arrays of <code>u8</code>.</p>
<p>The encoding of a string in Zig is de-facto assumed to be UTF-8.</p>
<p>It is possible to embed non-UTF-8 bytes into a string literal using <code>\xNN</code> notation.</p>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// Multiline string literals</span>
<span class="token keyword">const</span> hello_world_in_c <span class="token operator">=</span>
<span class="token string">    \\#include &lt;stdio.h>
    \\
    \\int main(int argc, char **argv) &#123;
    \\    printf("hello world\n");
    \\    return 0;
    \\&#125;</span>
<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Optionals"><a href="#Optionals" class="headerlink" title="Optionals"></a>Optionals</h2><pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">const</span> std <span class="token operator">=</span> <span class="token builtin">@import</span><span class="token punctuation">(</span><span class="token string">"std"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> expect <span class="token operator">=</span> std<span class="token punctuation">.</span>testing<span class="token punctuation">.</span>expect<span class="token punctuation">;</span>

<span class="token keyword">test</span> <span class="token string">"using optionals"</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ?u32: u32 or null</span>
    <span class="token keyword">const</span> o<span class="token punctuation">:</span> <span class="token class-name"><span class="token operator">?</span><span class="token builtin-type keyword">u32</span></span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token comment">// o.?: access the value</span>
    <span class="token keyword">try</span> <span class="token function">expect</span><span class="token punctuation">(</span>o<span class="token operator">.?</span> <span class="token operator">==</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Assignment"><a href="#Assignment" class="headerlink" title="Assignment"></a>Assignment</h2><pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token number">1234</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> y<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token number">5678</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> z<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>If you need a variable that you can modify, use the <code>var</code> keyword, otherwise, <code>const</code>.</p>
<p><code>undefined</code> means the value could be anything. <code>undefined</code> means “Not a meaningful<br> value. Using this value would be a bug. The value will be unused, or overwritten before being used.”</p>
<h2 id="Operators"><a href="#Operators" class="headerlink" title="Operators"></a>Operators</h2><ul>
<li><p><code>a orelse b</code></p>
<p>If <code>a</code> is <code>null</code>, returns <code>b</code> (as the default value), otherwise returns the unwrapped value of <code>a</code>.</p>
</li>
<li><p><code>a.?</code></p>
<p><code>a orelse unreachable</code>.</p>
<blockquote>
<p><code>unreachable</code> emits a call to <code>panic</code> with the message <code>reached unreachable code</code>.</p>
</blockquote>
</li>
<li><p><code>a catch b</code>, <code>a catch |err| b</code></p>
<p>If <code>a</code> is an error, returns <code>b</code> (as the default value), otherwise returns the unwrapped value of <code>a</code>.</p>
<p>The latter captures the error, <code>err</code> is a variable to hold the error value and can be used in the expression <code>b</code>.</p>
</li>
<li><p><code>a ++ b</code></p>
<p>Array concatenation.</p>
</li>
<li><p><code>a ** b</code></p>
<p>Array multiplication.</p>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// ababab</span>
<span class="token string">"ab"</span> <span class="token operator">**</span> <span class="token number">3</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
</ul>
<h2 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h2><pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// array literal</span>
<span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token class-name"><span class="token punctuation">[</span>_<span class="token punctuation">]</span><span class="token builtin-type keyword">u8</span></span><span class="token punctuation">&#123;</span> <span class="token char">'h'</span><span class="token punctuation">,</span> <span class="token char">'e'</span><span class="token punctuation">,</span> <span class="token char">'l'</span><span class="token punctuation">,</span> <span class="token char">'l'</span><span class="token punctuation">,</span> <span class="token char">'o'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// A string literal is a single-item pointer to an array.</span>
<span class="token keyword">const</span> same_message <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>

<span class="token comment">// modifiable array</span>
<span class="token keyword">var</span> some_integers<span class="token punctuation">:</span> <span class="token class-name"><span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

<span class="token comment">// initialize an array to zero</span>
<span class="token keyword">const</span> all_zero <span class="token operator">=</span> <span class="token class-name"><span class="token punctuation">[</span>_<span class="token punctuation">]</span><span class="token builtin-type keyword">u16</span></span><span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span> <span class="token operator">**</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token comment">// call a function to initialize an array</span>
<span class="token keyword">const</span> <span class="token class-name">Point</span> <span class="token operator">=</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>
    x<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span><span class="token punctuation">,</span>
    y<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> more_points <span class="token operator">=</span> <span class="token class-name"><span class="token punctuation">[</span>_<span class="token punctuation">]</span>Point</span><span class="token punctuation">&#123;</span><span class="token function">makePoint</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token operator">**</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function">makePoint</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span><span class="token punctuation">)</span> <span class="token class-name">Point</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token class-name">Point</span><span class="token punctuation">&#123;</span>
        <span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">,</span>
        <span class="token punctuation">.</span>y <span class="token operator">=</span> x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Multidimensional Arrays</span>
<span class="token keyword">const</span> mat4x4 <span class="token operator">=</span> <span class="token class-name"><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token builtin-type keyword">f32</span></span><span class="token punctuation">&#123;</span>
    <span class="token class-name"><span class="token punctuation">[</span>_<span class="token punctuation">]</span><span class="token builtin-type keyword">f32</span></span><span class="token punctuation">&#123;</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token class-name"><span class="token punctuation">[</span>_<span class="token punctuation">]</span><span class="token builtin-type keyword">f32</span></span><span class="token punctuation">&#123;</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token class-name"><span class="token punctuation">[</span>_<span class="token punctuation">]</span><span class="token builtin-type keyword">f32</span></span><span class="token punctuation">&#123;</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token class-name"><span class="token punctuation">[</span>_<span class="token punctuation">]</span><span class="token builtin-type keyword">f32</span></span><span class="token punctuation">&#123;</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// The syntax [N:x]T describes Sentinel-Terminated arrays</span>
<span class="token comment">// We can use the sentinel element to determine the end</span>
<span class="token comment">// arr[4] == 0, the sentinel element</span>
<span class="token comment">// arr.len == 4, not 5</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token class-name"><span class="token punctuation">[</span>_<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token builtin-type keyword">u8</span></span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Slices"><a href="#Slices" class="headerlink" title="Slices"></a>Slices</h2><p>A slice is a <strong>pointer</strong> and a length.</p>
<p>The difference between an array and a slice is that the array’s length is part of the type and known at compile-time, whereas the slice’s length is known at runtime. Both can be accessed with the <code>len</code> field.</p>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">const</span> hello<span class="token punctuation">:</span> <span class="token class-name"><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">const</span> <span class="token builtin-type keyword">u8</span></span> <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token class-name"><span class="token punctuation">[</span>_<span class="token punctuation">]</span><span class="token builtin-type keyword">i32</span></span><span class="token punctuation">&#123;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> known_at_runtime_zero<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">usize</span></span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> slice <span class="token operator">=</span> array<span class="token punctuation">[</span>known_at_runtime_zero<span class="token operator">..</span>array<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// If you slice with comptime-known start and end positions,</span>
<span class="token comment">// the result is a pointer to an array, rather than a slice.</span>
<span class="token keyword">const</span> array_ptr <span class="token operator">=</span> array<span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">..</span>array<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// A comptime-known length. A runtime-known start position.</span>
<span class="token comment">// Slicing twice allows the compiler to perform some optimisations.</span>
<span class="token keyword">var</span> runtime_start<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">usize</span></span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> length <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> array_ptr_len <span class="token operator">=</span> array<span class="token punctuation">[</span>runtime_start<span class="token operator">..</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">..</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// The syntax [:x]T describes Sentinel-Terminated slices</span>
<span class="token comment">// It has a runtime-known length</span>
<span class="token comment">// slice[5] == 0, the sentinel element</span>
<span class="token comment">// slice.len == 5, not 6</span>
<span class="token keyword">const</span> slice<span class="token punctuation">:</span> <span class="token class-name"><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token keyword">const</span> <span class="token builtin-type keyword">u8</span></span> <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>

<span class="token comment">// Another Sentinel-Terminated slice syntax: data[start..end :x]</span>
<span class="token comment">// "data" is a many-item pointer, array or slice.</span>
<span class="token comment">// array[3] must be the same value as the sentinel value: 0,</span>
<span class="token comment">// otherwise, runtime panic</span>
<span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token class-name"><span class="token punctuation">[</span>_<span class="token punctuation">]</span><span class="token builtin-type keyword">u8</span></span><span class="token punctuation">&#123;</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> runtime_length<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">usize</span></span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> slice <span class="token operator">=</span> array<span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">..</span>runtime_length <span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Function parameters that are “strings” are expected to be UTF-8 encoded slices of <code>u8</code>.</p>
<h2 id="Vectors"><a href="#Vectors" class="headerlink" title="Vectors"></a>Vectors</h2><p>A vector is a group of booleans, <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#Integers">Integers</a>, <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#Floats">Floats</a>, or <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#Pointers">Pointers</a> which are operated on in parallel, using SIMD instructions if possible.</p>
<p>Vector types are created with the builtin function <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#Vector">@Vector</a>.</p>
<p>Vectors support the same builtin operators as their underlying base types. These operations return a vector of the same length as the input vectors.</p>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// Vectors have a compile-time known length and base type.</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token builtin">@Vector</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token builtin-type keyword">i32</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// Vectors and fixed-length arrays can be automatically</span>
<span class="token comment">// assigned back and forth</span>
<span class="token keyword">var</span> arr1<span class="token punctuation">:</span> <span class="token class-name"><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token builtin-type keyword">f32</span></span> <span class="token operator">=</span> <span class="token class-name"><span class="token punctuation">[</span>_<span class="token punctuation">]</span><span class="token builtin-type keyword">f32</span></span><span class="token punctuation">&#123;</span> <span class="token number">1.1</span><span class="token punctuation">,</span> <span class="token number">3.2</span><span class="token punctuation">,</span> <span class="token number">4.5</span><span class="token punctuation">,</span> <span class="token number">5.6</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> vec<span class="token punctuation">:</span> <span class="token builtin">@Vector</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token builtin-type keyword">f32</span><span class="token punctuation">)</span> <span class="token operator">=</span> arr1<span class="token punctuation">;</span>
<span class="token keyword">var</span> arr2<span class="token punctuation">:</span> <span class="token class-name"><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token builtin-type keyword">f32</span></span> <span class="token operator">=</span> vec<span class="token punctuation">;</span>

<span class="token comment">// You can also assign from a slice with comptime-known</span>
<span class="token comment">// length to a vector using .*</span>
<span class="token keyword">const</span> vec2<span class="token punctuation">:</span> <span class="token builtin">@Vector</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token builtin-type keyword">f32</span><span class="token punctuation">)</span> <span class="token operator">=</span> arr1<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">.*</span><span class="token punctuation">;</span>

<span class="token comment">// vec2 == vec3</span>
<span class="token comment">// &amp;arr1 is a pointer</span>
<span class="token keyword">var</span> slice<span class="token punctuation">:</span> <span class="token class-name"><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">const</span> <span class="token builtin-type keyword">f32</span></span> <span class="token operator">=</span> <span class="token operator">&amp;</span>arr1<span class="token punctuation">;</span>
<span class="token keyword">var</span> offset<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u32</span></span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> vec3<span class="token punctuation">:</span> <span class="token builtin">@Vector</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token builtin-type keyword">f32</span><span class="token punctuation">)</span> <span class="token operator">=</span> slice<span class="token punctuation">[</span>offset<span class="token operator">..</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">..</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">.*</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Pointers"><a href="#Pointers" class="headerlink" title="Pointers"></a>Pointers</h2><p>Two kinds of pointers: single-item and many-item</p>
<ul>
<li><p><code>*T</code></p>
<p>single-item pointer to exactly one item.</p>
</li>
<li><p><code>[*]T</code></p>
<p>many-item pointer to unknown number of items.</p>
</li>
</ul>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// single-item pointer</span>
<span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token number">1234</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> x_ptr <span class="token operator">=</span> <span class="token operator">&amp;</span>x<span class="token punctuation">;</span>

<span class="token comment">// x_ptr.*: dereference a pointer</span>
<span class="token comment">// assigning the value to '_', we don't use the return value</span>
_ <span class="token operator">=</span> x_ptr<span class="token operator">.*</span> <span class="token operator">==</span> <span class="token number">1234</span><span class="token punctuation">;</span>
x_ptr<span class="token operator">.*</span> <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">// many-item pointer</span>
<span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token class-name"><span class="token punctuation">[</span>_<span class="token punctuation">]</span><span class="token builtin-type keyword">i32</span></span><span class="token punctuation">&#123;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ptr<span class="token punctuation">:</span> <span class="token class-name"><span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">]</span><span class="token keyword">const</span> <span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token operator">&amp;</span>array<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">const</span> expect <span class="token operator">=</span> <span class="token builtin">@import</span><span class="token punctuation">(</span><span class="token string">"std"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>testing<span class="token punctuation">.</span>expect<span class="token punctuation">;</span>

<span class="token keyword">test</span> <span class="token string">"optional pointers"</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// Pointers cannot be null. If you want a null pointer,</span>
    <span class="token comment">// use the optional.</span>
    <span class="token comment">// prefix `?` to make the pointer type optional.</span>
    <span class="token keyword">var</span> ptr<span class="token punctuation">:</span> <span class="token class-name"><span class="token operator">?</span><span class="token operator">*</span><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    ptr <span class="token operator">=</span> <span class="token operator">&amp;</span>x<span class="token punctuation">;</span>

    <span class="token comment">// dereference a optional pointer</span>
    <span class="token keyword">try</span> <span class="token function">expect</span><span class="token punctuation">(</span>ptr<span class="token operator">.?</span><span class="token operator">.*</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// error: comparison of '*i32' with null</span>
    <span class="token comment">// try expect(ptr.? != null);</span>
    <span class="token comment">// error: comparison of 'i32' with null</span>
    <span class="token comment">// try expect(ptr.?.* != null);</span>
    <span class="token keyword">try</span> <span class="token function">expect</span><span class="token punctuation">(</span>ptr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// An array of [*]const u8, its length is 1</span>
<span class="token keyword">const</span> window_name <span class="token operator">=</span> <span class="token class-name"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">]</span><span class="token keyword">const</span> <span class="token builtin-type keyword">u8</span></span><span class="token punctuation">&#123;</span><span class="token string">"window name"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// An array of ?[*]const u8</span>
<span class="token keyword">const</span> x<span class="token punctuation">:</span> <span class="token class-name"><span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">]</span><span class="token keyword">const</span> <span class="token operator">?</span><span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">]</span><span class="token keyword">const</span> <span class="token builtin-type keyword">u8</span></span> <span class="token operator">=</span> <span class="token operator">&amp;</span>window_name<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>Zig supports pointer arithmetic. It’s better to assign the pointer to <code>[*]T</code> and increment that variable.</p>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token class-name"><span class="token punctuation">[</span>_<span class="token punctuation">]</span><span class="token builtin-type keyword">i32</span></span><span class="token punctuation">&#123;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> length<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">usize</span></span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> slice <span class="token operator">=</span> array<span class="token punctuation">[</span>length<span class="token operator">..</span>array<span class="token punctuation">.</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// don't do this</span>
<span class="token comment">// now the slice is in an bad state since len has not been updated</span>
<span class="token comment">// slice.len is still 4</span>
slice<span class="token punctuation">.</span>ptr <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// Conversion between an integer address, a pointer</span>
<span class="token keyword">const</span> ptr<span class="token punctuation">:</span> <span class="token class-name"><span class="token operator">*</span><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token builtin">@ptrFromInt</span><span class="token punctuation">(</span><span class="token number">0xdeadbee0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> addr <span class="token operator">=</span> <span class="token builtin">@intFromPtr</span><span class="token punctuation">(</span>ptr<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// pointer casting</span>
<span class="token keyword">const</span> bytes <span class="token keyword">align</span><span class="token punctuation">(</span><span class="token builtin">@alignOf</span><span class="token punctuation">(</span><span class="token builtin-type keyword">u32</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token class-name"><span class="token punctuation">[</span>_<span class="token punctuation">]</span><span class="token builtin-type keyword">u8</span></span><span class="token punctuation">&#123;</span> <span class="token number">0x12</span><span class="token punctuation">,</span> <span class="token number">0x12</span><span class="token punctuation">,</span> <span class="token number">0x12</span><span class="token punctuation">,</span> <span class="token number">0x12</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// @ptrCast is an unsafe operation</span>
<span class="token comment">// u32_ptr.* == 0x12121212</span>
<span class="token keyword">const</span> u32_ptr<span class="token punctuation">:</span> <span class="token class-name"><span class="token operator">*</span><span class="token keyword">const</span> <span class="token builtin-type keyword">u32</span></span> <span class="token operator">=</span> <span class="token builtin">@ptrCast</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// a straightforward way to do the above than pointer casting</span>
<span class="token comment">// u32_value == 0x12121212</span>
<span class="token keyword">const</span> u32_value <span class="token operator">=</span> <span class="token builtin">@as</span><span class="token punctuation">(</span><span class="token builtin-type keyword">u32</span><span class="token punctuation">,</span> <span class="token builtin">@bitCast</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// another way, using a slice narrowing cast</span>
<span class="token comment">// u32_value == 0x12121212</span>
<span class="token keyword">const</span> u32_value <span class="token operator">=</span> std<span class="token punctuation">.</span>mem<span class="token punctuation">.</span><span class="token function">bytesAsSlice</span><span class="token punctuation">(</span><span class="token builtin-type keyword">u32</span><span class="token punctuation">,</span> bytes<span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">..</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// Sentinel-Terminated Pointers</span>
<span class="token keyword">pub</span> <span class="token keyword">extern</span> <span class="token string">"c"</span> <span class="token keyword">fn</span> <span class="token function">printf</span><span class="token punctuation">(</span>format<span class="token punctuation">:</span> <span class="token class-name"><span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token keyword">const</span> <span class="token builtin-type keyword">u8</span></span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">c_int</span></span><span class="token punctuation">;</span>

<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token class-name"><span class="token operator">!</span><span class="token builtin-type keyword">void</span></span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ok</span>
    _ <span class="token operator">=</span> <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello, world!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// error: expected type '[*:0]const u8', found '[14:0]u8'</span>
    <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token string">"Hello, world!\n"</span><span class="token punctuation">;</span>
    _ <span class="token operator">=</span> <span class="token function">printf</span><span class="token punctuation">(</span>msg<span class="token operator">.*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>The syntax <code>[*:x]T</code> describes a pointer that has a length determined by a sentinel value. This provides protection against buffer overflow and overreads.</p>
<p>Slices have bounds checking, generally prefer <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#Slices">Slices</a> rather than <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#Sentinel-Terminated-Pointers">Sentinel-Terminated Pointers</a>.</p>
<h2 id="struct"><a href="#struct" class="headerlink" title="struct"></a>struct</h2><p>Zig gives no guarantees about the order of fields and the size of the struct.</p>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">const</span> <span class="token class-name">Point</span> <span class="token operator">=</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>
    x<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">f32</span></span> <span class="token operator">=</span> <span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token comment">// default value</span>
    y<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">f32</span></span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// an instance</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token class-name">Point</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0.12</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// calculate a struct base pointer given a field pointer</span>
<span class="token keyword">const</span> point <span class="token operator">=</span> <span class="token builtin">@fieldParentPtr</span><span class="token punctuation">(</span>Point<span class="token punctuation">,</span> <span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>p<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Anonymous struct literals</span>
<span class="token comment">// no copy</span>
<span class="token keyword">var</span> pt<span class="token punctuation">:</span> <span class="token class-name">Point</span> <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">&#123;</span>
    <span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0.12</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">3.0</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// Structs can have methods</span>
<span class="token keyword">const</span> <span class="token class-name">Vec</span> <span class="token operator">=</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>
    x<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">f32</span></span><span class="token punctuation">,</span>
    y<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">f32</span></span><span class="token punctuation">,</span>
    z<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">f32</span></span><span class="token punctuation">,</span>

    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">init</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">f32</span></span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">f32</span></span><span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">f32</span></span><span class="token punctuation">)</span> <span class="token class-name">Vec</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token class-name">Vec</span> <span class="token punctuation">&#123;</span>
            <span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">,</span>
            <span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">,</span>
            <span class="token punctuation">.</span>z <span class="token operator">=</span> z<span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">dot</span><span class="token punctuation">(</span>self<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token punctuation">,</span> other<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">f32</span></span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>x <span class="token operator">*</span> other<span class="token punctuation">.</span>x <span class="token operator">+</span> self<span class="token punctuation">.</span>y <span class="token operator">*</span> other<span class="token punctuation">.</span>y <span class="token operator">+</span> self<span class="token punctuation">.</span>z <span class="token operator">*</span> other<span class="token punctuation">.</span>z<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// Structs can have declarations</span>
<span class="token comment">// Structs can have 0 fields</span>
<span class="token comment">// @sizeOf(Empty) == 0</span>
<span class="token comment">// Empty.PI is a struct namespaced variable</span>
<span class="token keyword">const</span> <span class="token class-name">Empty</span> <span class="token operator">=</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">pub</span> <span class="token keyword">const</span> PI <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// you can still instantiate an empty struct</span>
<span class="token keyword">const</span> does_nothing <span class="token operator">=</span> <span class="token class-name">Empty</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// Return a struct from a function</span>
<span class="token comment">// This is how we do generics in Zig</span>
<span class="token keyword">fn</span> <span class="token function">LinkedList</span><span class="token punctuation">(</span><span class="token keyword">comptime</span> T<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">type</span></span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">type</span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">pub</span> <span class="token keyword">const</span> <span class="token class-name">Node</span> <span class="token operator">=</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>
            prev<span class="token punctuation">:</span> <span class="token class-name"><span class="token operator">?</span><span class="token operator">*</span>Node</span><span class="token punctuation">,</span>
            next<span class="token punctuation">:</span> <span class="token class-name"><span class="token operator">?</span><span class="token operator">*</span>Node</span><span class="token punctuation">,</span>
            data<span class="token punctuation">:</span> <span class="token class-name">T</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

        first<span class="token punctuation">:</span> <span class="token class-name"><span class="token operator">?</span><span class="token operator">*</span>Node</span><span class="token punctuation">,</span>
        last<span class="token punctuation">:</span>  <span class="token class-name"><span class="token operator">?</span><span class="token operator">*</span>Node</span><span class="token punctuation">,</span>
        len<span class="token punctuation">:</span>   <span class="token class-name"><span class="token builtin-type keyword">usize</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token function">LinkedList</span><span class="token punctuation">(</span><span class="token builtin-type keyword">i32</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">.</span>first <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span>last <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span>len <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ListOfInts <span class="token operator">=</span> <span class="token function">LinkedList</span><span class="token punctuation">(</span><span class="token builtin-type keyword">i32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> node <span class="token operator">=</span> <span class="token class-name">ListOfInts<span class="token punctuation">.</span>Node</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token number">1234</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> list2 <span class="token operator">=</span> <span class="token function">LinkedList</span><span class="token punctuation">(</span><span class="token builtin-type keyword">i32</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">.</span>first <span class="token operator">=</span> <span class="token operator">&amp;</span>node<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>last <span class="token operator">=</span> <span class="token operator">&amp;</span>node<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>len <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// When using a pointer to a struct, fields can be accessed directly,</span>
<span class="token comment">// without explicitly dereferencing the pointer.</span>
<span class="token comment">// equal: list2.first.?.*.data</span>
_ <span class="token operator">=</span> list2<span class="token punctuation">.</span>first<span class="token operator">.?</span><span class="token punctuation">.</span>data<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Other types of struct:</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#extern-struct">extern struct</a></p>
<p>To be compatible with the C ABI.</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#packed-struct">packed struct</a></p>
<p>Have guaranteed in-memory layout.</p>
</li>
</ul>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// Anonymous structs can be created without specifying field names,</span>
<span class="token comment">// and are referred to as "tuples". </span>
<span class="token comment">// The fields are implicitly named using numbers starting from 0.</span>
<span class="token keyword">const</span> values <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">&#123;</span>
    <span class="token builtin">@as</span><span class="token punctuation">(</span><span class="token builtin-type keyword">u32</span><span class="token punctuation">,</span> <span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token builtin">@as</span><span class="token punctuation">(</span><span class="token builtin-type keyword">f64</span><span class="token punctuation">,</span> <span class="token number">12.34</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string">"hi"</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span> <span class="token operator">++</span> <span class="token punctuation">.</span><span class="token punctuation">&#123;</span><span class="token boolean">false</span><span class="token punctuation">&#125;</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment">// values.len == 6</span>
<span class="token comment">// values.@"3"[0] == 'h'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Like arrays, tuples have a <code>.len</code> field, can be indexed (provided the index is comptime-known) and work with the <code>++</code> and <code>**</code> operators. </p>
<h2 id="enum"><a href="#enum" class="headerlink" title="enum"></a>enum</h2><pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">const</span> <span class="token class-name">Type</span> <span class="token operator">=</span> <span class="token keyword">enum</span> <span class="token punctuation">&#123;</span>
    ok<span class="token punctuation">,</span>
    not_ok<span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// @typeInfo can be used to access the integer tag type of an enum.</span>
<span class="token comment">// @typeInfo(Type).Enum.tag_type == u2</span>

<span class="token keyword">const</span> c <span class="token operator">=</span> Type<span class="token punctuation">.</span>ok<span class="token punctuation">;</span>
<span class="token comment">// Enum literals</span>
<span class="token comment">// Specifying the name of an enum field without specifying the enum type</span>
<span class="token keyword">const</span> c2<span class="token punctuation">:</span> <span class="token class-name">Color</span> <span class="token operator">=</span> <span class="token punctuation">.</span>ok<span class="token punctuation">;</span>

<span class="token comment">// If you want access to the ordinal value of an enum, you</span>
<span class="token comment">// can specify the tag type.</span>
<span class="token keyword">const</span> <span class="token class-name">Value</span> <span class="token operator">=</span> <span class="token keyword">enum</span><span class="token punctuation">(</span>u2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    zero<span class="token punctuation">,</span>
    one<span class="token punctuation">,</span>
    two<span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// Now you can cast between u2 and Value.</span>
<span class="token comment">// @intFromEnum(Value.zero) == 0</span>

<span class="token comment">// You can override the ordinal value for an enum.</span>
<span class="token keyword">const</span> <span class="token class-name">Value2</span> <span class="token operator">=</span> <span class="token keyword">enum</span><span class="token punctuation">(</span><span class="token builtin-type keyword">u32</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    hundred <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span>
    thousand <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    million <span class="token operator">=</span> <span class="token number">1000000</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// @intFromEnum(Value2.hundred) == 100</span>

<span class="token comment">// You can also override only some values.</span>
<span class="token keyword">const</span> <span class="token class-name">Value3</span> <span class="token operator">=</span> <span class="token keyword">enum</span><span class="token punctuation">(</span>u4<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    a<span class="token punctuation">,</span>
    b <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">,</span>
    c<span class="token punctuation">,</span>
    d <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>
    e<span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// @intFromEnum(Value3.a) == 0</span>
<span class="token comment">// @intFromEnum(Value3.c) == 9</span>
<span class="token comment">// @intFromEnum(Value3.e) == 5</span>

<span class="token comment">// Enums can have methods, the same as structs and unions.</span>
<span class="token comment">// Enum methods are not special, they are only namespaced</span>
<span class="token comment">// functions</span>
<span class="token keyword">const</span> <span class="token class-name">Suit</span> <span class="token operator">=</span> <span class="token keyword">enum</span> <span class="token punctuation">&#123;</span>
    clubs<span class="token punctuation">,</span>
    spades<span class="token punctuation">,</span>
    diamonds<span class="token punctuation">,</span>
    hearts<span class="token punctuation">,</span>

    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">isClubs</span><span class="token punctuation">(</span>self<span class="token punctuation">:</span> <span class="token class-name">Suit</span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">bool</span></span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> self <span class="token operator">==</span> Suit<span class="token punctuation">.</span>clubs<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// Non-exhaustive enum</span>
<span class="token comment">// Have a trailing '_' field</span>
<span class="token keyword">const</span> <span class="token class-name">Number</span> <span class="token operator">=</span> <span class="token keyword">enum</span><span class="token punctuation">(</span><span class="token builtin-type keyword">u8</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    one<span class="token punctuation">,</span>
    two<span class="token punctuation">,</span>
    three<span class="token punctuation">,</span>
    _<span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// A switch on a non-exhaustive enum can include a '_' prong</span>
<span class="token comment">// as an alternative to an else prong</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>number<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">.</span>one <span class="token operator">=></span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span>two<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>three <span class="token operator">=></span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    _ <span class="token operator">=></span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>There is <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#extern-enum">extern enum</a>, to be compatible with the C ABI.</p>
<h2 id="union"><a href="#union" class="headerlink" title="union"></a>union</h2><p>Only one field can be active at a time. The in-memory representation of bare unions is not guaranteed.</p>
<p>Use <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#ptrCast">@ptrCast</a>, or use an <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#extern-union">extern union</a> or a <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#packed-union">packed union</a> which have guaranteed in-memory layout.</p>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">const</span> <span class="token class-name">Payload</span> <span class="token operator">=</span> <span class="token keyword">union</span> <span class="token punctuation">&#123;</span>
    int<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i64</span></span><span class="token punctuation">,</span>
    float<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">f64</span></span><span class="token punctuation">,</span>
    boolean<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">bool</span></span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// "int" field is active</span>
<span class="token keyword">var</span> payload <span class="token operator">=</span> <span class="token class-name">Payload</span><span class="token punctuation">&#123;</span> <span class="token punctuation">.</span>int <span class="token operator">=</span> <span class="token number">1234</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// to access the value</span>
_ <span class="token operator">=</span> payload<span class="token punctuation">.</span>int<span class="token punctuation">;</span>
<span class="token comment">// To activate another field by assigning the entire union</span>
payload <span class="token operator">=</span> <span class="token class-name">Payload</span><span class="token punctuation">&#123;</span> <span class="token punctuation">.</span>float <span class="token operator">=</span> <span class="token number">12.34</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// anonymous union literal</span>
<span class="token keyword">var</span> p<span class="token punctuation">:</span> <span class="token class-name">Payload</span> <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">&#123;</span><span class="token punctuation">.</span>int <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// Tagged union, used with switch expressions</span>
<span class="token keyword">const</span> <span class="token class-name">ComplexTypeTag</span> <span class="token operator">=</span> <span class="token keyword">enum</span> <span class="token punctuation">&#123;</span>
    ok<span class="token punctuation">,</span>
    not_ok<span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// The field names of ComplexType and ComplexTypeTag must be same </span>
<span class="token keyword">const</span> <span class="token class-name">ComplexType</span> <span class="token operator">=</span> <span class="token keyword">union</span><span class="token punctuation">(</span>ComplexTypeTag<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    ok<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u8</span></span><span class="token punctuation">,</span>
    not_ok<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">void</span></span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token class-name">ComplexType</span><span class="token punctuation">&#123;</span> <span class="token punctuation">.</span>ok <span class="token operator">=</span> <span class="token number">42</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">switch</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// |x| syntax captures the matched value</span>
    <span class="token comment">// *value make it a pointer</span>
    ComplexTypeTag<span class="token punctuation">.</span>ok <span class="token operator">=></span> <span class="token operator">|</span><span class="token operator">*</span>value<span class="token operator">|</span> value<span class="token operator">.*</span> <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    ComplexTypeTag<span class="token punctuation">.</span>not_ok <span class="token operator">=></span> <span class="token keyword">unreachable</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">// c.ok == 43</span>

<span class="token comment">// Tagged union, but to infer enum tag type</span>
<span class="token comment">// Pay attention to the differences 'union(ComplexTypeTag)'</span>
<span class="token comment">// and 'union(enum)'</span>
<span class="token keyword">const</span> <span class="token class-name">Variant</span> <span class="token operator">=</span> <span class="token keyword">union</span><span class="token punctuation">(</span><span class="token keyword">enum</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    int<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span><span class="token punctuation">,</span>
    boolean<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">bool</span></span><span class="token punctuation">,</span>
    <span class="token comment">// void can be omitted when inferring enum tag type.</span>
    none<span class="token punctuation">,</span> <span class="token comment">// void</span>

    <span class="token comment">// unions can have methods just like structs and enums</span>
    <span class="token keyword">fn</span> <span class="token function">truthy</span><span class="token punctuation">(</span>self<span class="token punctuation">:</span> <span class="token class-name">Variant</span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">bool</span></span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            Variant<span class="token punctuation">.</span>int <span class="token operator">=></span> <span class="token operator">|</span>x_int<span class="token operator">|</span> x_int <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">,</span>
            Variant<span class="token punctuation">.</span>boolean <span class="token operator">=></span> <span class="token operator">|</span>x_bool<span class="token operator">|</span> x_bool<span class="token punctuation">,</span>
            Variant<span class="token punctuation">.</span>none <span class="token operator">=></span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Other types of union:</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#extern-union">extern union</a></p>
<p>To be compatible with the C ABI.</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#packed-union">packed union</a></p>
<p>Have guaranteed in-memory layout.</p>
</li>
</ul>
<h2 id="opaque"><a href="#opaque" class="headerlink" title="opaque"></a>opaque</h2><p><code>opaque &#123;&#125;</code> declares a new type with an unknown (but non-zero) size and alignment.</p>
<p>It can contain declarations the same as <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#struct">structs</a>, <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#union">unions</a>, and <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#enum">enums</a>.</p>
<p>This is typically used for type safety when interacting with C code that does not expose struct details.</p>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">const</span> Derp <span class="token operator">=</span> <span class="token class-name">opaque</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Wat <span class="token operator">=</span> <span class="token class-name">opaque</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">extern</span> <span class="token keyword">fn</span> <span class="token function">bar</span><span class="token punctuation">(</span>d<span class="token punctuation">:</span> <span class="token class-name"><span class="token operator">*</span>Derp</span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">void</span></span><span class="token punctuation">;</span>
<span class="token keyword">fn</span> <span class="token function">foo</span><span class="token punctuation">(</span>w<span class="token punctuation">:</span> <span class="token class-name"><span class="token operator">*</span>Wat</span><span class="token punctuation">)</span> <span class="token function">callconv</span><span class="token punctuation">(</span><span class="token punctuation">.</span>C<span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">void</span></span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// error: expected type '*test_opaque.Derp', found</span>
    <span class="token comment">// '*test_opaque.Wat'</span>
    <span class="token function">bar</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">test</span> <span class="token string">"call foo"</span> <span class="token punctuation">&#123;</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Blocks"><a href="#Blocks" class="headerlink" title="Blocks"></a>Blocks</h2><p>Blocks are expressions.</p>
<p>Blocks are used to limit the scope of variable declarations.</p>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    _ <span class="token operator">=</span> x<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// An empty block is equivalent to void&#123;&#125;</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token class-name"><span class="token builtin-type keyword">void</span></span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// labeled block</span>
<span class="token comment">// break can be used to return a value from the block</span>
<span class="token comment">// "blk" can be any name</span>
<span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token label">blk</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
    y <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span> <span class="token punctuation">:</span><span class="token label">blk</span> y<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Shadowing"><a href="#Shadowing" class="headerlink" title="Shadowing"></a>Shadowing</h2><pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">const</span> pi <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>
<span class="token punctuation">&#123;</span>
    <span class="token comment">// error: local variable 'pi' shadows local constant from outer</span>
    <span class="token comment">// scope</span>
    <span class="token keyword">var</span> pi<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token number">1234</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// This is ok</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> pi <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>
    _ <span class="token operator">=</span> pi<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> pi<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">bool</span></span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    _ <span class="token operator">=</span> pi<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Variables"><a href="#Variables" class="headerlink" title="Variables"></a>Variables</h2><p>Identifiers must start with an alphabetic character or underscore and may be followed by any number of alphanumeric characters or underscores. They must not overlap with any keywords.</p>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">const</span> @"identifier with spaces in it" <span class="token operator">=</span> <span class="token number">0xff</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token builtin">@import</span><span class="token punctuation">(</span><span class="token string">"std"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>c<span class="token punctuation">;</span>
<span class="token keyword">pub</span> <span class="token keyword">extern</span> <span class="token string">"c"</span> <span class="token keyword">fn</span> @"<span class="token keyword">error</span>"<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">void</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token class-name">Color</span> <span class="token operator">=</span> <span class="token keyword">enum</span> <span class="token punctuation">&#123;</span>
  red<span class="token punctuation">,</span>
  @"really red"<span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> color<span class="token punctuation">:</span> <span class="token class-name">Color</span> <span class="token operator">=</span> <span class="token punctuation">.</span>@"really red"<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>If a name that does not fit these requirements is needed, the <code>@&quot;&quot;</code> syntax may be used.</p>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">var</span> y<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> x<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">34</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token class-name">S</span> <span class="token operator">=</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token number">1234</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#Containers">Container</a> level variables have static lifetime and are order-independent and lazily analyzed.</p>
<p>The initialization value of container level variables is implicitly <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#comptime">comptime</a>. If a container level variable is <code>const</code> then its value is <code>comptime</code>-known, otherwise it is runtime-known.</p>
<blockquote>
<p>A <em>container</em> in Zig is any syntactical construct that acts as a namespace to hold <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#Container-Level-Variables">variable</a> and <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#Functions">function</a> declarations.</p>
</blockquote>
<blockquote>
<p>Containers are also type definitions which can be instantiated. <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#struct">Structs</a>, <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#enum">enums</a>, <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#union">unions</a>, <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#opaque">opaques</a>, and even Zig source files themselves are containers.</p>
</blockquote>
<blockquote>
<p>Although containers (except Zig source files) use curly braces to surround their definition, they should not be confused with <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#Blocks">blocks</a> or functions. Containers do not contain statements.</p>
</blockquote>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">fn</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> <span class="token class-name">S</span> <span class="token operator">=</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token number">1234</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
    S<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> S<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>It is also possible to have local variables with static lifetime by using containers inside functions.</p>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// ...</span>
<span class="token keyword">test</span> <span class="token string">"comptime vars"</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">comptime</span> <span class="token keyword">var</span> y<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    y <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token function">expect</span><span class="token punctuation">(</span>y <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>A local variable may be qualified with the <code>comptime</code> keyword. This causes the variable’s value to be <code>comptime</code>-known, and all loads and stores of the variable to happen during semantic analysis of the program, rather than at runtime.<br>All variables declared in a <code>comptime</code> expression are implicitly <code>comptime</code> variables.</p>
<h2 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h2><pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">const</span> a<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u64</span></span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> zz<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u64</span></span> <span class="token operator">=</span> <span class="token number">103</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// Multiple cases</span>
    <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token operator">=></span> <span class="token number">0</span><span class="token punctuation">,</span>

    <span class="token comment">// Ranges. These are inclusive of both ends.</span>
    <span class="token number">5</span><span class="token operator">...</span><span class="token number">100</span> <span class="token operator">=></span> <span class="token number">1</span><span class="token punctuation">,</span>

    <span class="token comment">// if a == 101, b == 11</span>
    <span class="token number">101</span> <span class="token operator">=></span> <span class="token label">blk</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> c<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u64</span></span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span> <span class="token punctuation">:</span><span class="token label">blk</span> c <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

    <span class="token comment">// Switching on arbitrary expressions is allowed as long as the</span>
    <span class="token comment">// expression is known at compile-time.</span>
    <span class="token comment">// if a == 103, b == 103</span>
    zz <span class="token operator">=></span> zz<span class="token punctuation">,</span>

    <span class="token comment">// if a == 105, b == 107</span>
    <span class="token label">blk</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">const</span> d<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u32</span></span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> e<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u32</span></span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span> <span class="token punctuation">:</span><span class="token label">blk</span> d <span class="token operator">+</span> e<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span> <span class="token operator">=></span> <span class="token number">107</span><span class="token punctuation">,</span>

    <span class="token comment">// When a switch expression does not have an else clause,</span>
    <span class="token comment">// it must exhaustively list all the possible values.</span>
    <span class="token keyword">else</span> <span class="token operator">=></span> <span class="token number">9</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// Switching with Enum literals</span>
<span class="token keyword">const</span> <span class="token class-name">Color</span> <span class="token operator">=</span> <span class="token keyword">enum</span> <span class="token punctuation">&#123;</span>
    auto<span class="token punctuation">,</span>
    off<span class="token punctuation">,</span>
    on<span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> color <span class="token operator">=</span> Color<span class="token punctuation">.</span>off<span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>color<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">.</span>auto <span class="token operator">=></span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span>on <span class="token operator">=></span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span>off <span class="token operator">=></span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// switch can be used to capture the field values of a Tagged union</span>
<span class="token keyword">const</span> <span class="token class-name">Point</span> <span class="token operator">=</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>
    x<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u8</span></span><span class="token punctuation">,</span>
    y<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u8</span></span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// if 'Item' is not a tagged union,</span>
<span class="token comment">// error: union 'Item' has no member named 'a'</span>
<span class="token comment">// error: union field missing type. The error message is about 'Item.d'</span>
<span class="token keyword">const</span> <span class="token class-name">Item</span> <span class="token operator">=</span> <span class="token keyword">union</span><span class="token punctuation">(</span><span class="token keyword">enum</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    a<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u32</span></span><span class="token punctuation">,</span>
    c<span class="token punctuation">:</span> <span class="token class-name">Point</span><span class="token punctuation">,</span>
    d<span class="token punctuation">,</span> <span class="token comment">// void</span>
    e<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u32</span></span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token class-name">Item</span><span class="token punctuation">&#123;</span> <span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token class-name">Point</span><span class="token punctuation">&#123;</span> <span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">2</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// |item| captures the matched value</span>
    Item<span class="token punctuation">.</span>a<span class="token punctuation">,</span> Item<span class="token punctuation">.</span>e <span class="token operator">=></span> <span class="token operator">|</span>item<span class="token operator">|</span> item<span class="token punctuation">,</span>

    <span class="token comment">// *item make it a pointer</span>
    Item<span class="token punctuation">.</span>c <span class="token operator">=></span> <span class="token operator">|</span><span class="token operator">*</span>item<span class="token operator">|</span> <span class="token label">blk</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
        item<span class="token operator">.*</span><span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span> <span class="token punctuation">:</span><span class="token label">blk</span> <span class="token number">6</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

    Item<span class="token punctuation">.</span>d <span class="token operator">=></span> <span class="token number">8</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token comment">// Inline switch</span>
<span class="token keyword">fn</span> <span class="token function">isFieldOptional</span><span class="token punctuation">(</span><span class="token keyword">comptime</span> T<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">type</span></span><span class="token punctuation">,</span> field_index<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">usize</span></span><span class="token punctuation">)</span> <span class="token class-name"><span class="token operator">!</span><span class="token builtin-type keyword">bool</span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> fields <span class="token operator">=</span> <span class="token builtin">@typeInfo</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">.</span>Struct<span class="token punctuation">.</span>fields<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>field_index<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// can't write the code like this</span>
        <span class="token comment">// the error message:</span>
        <span class="token comment">// error: values of type '[]const builtin.Type.StructField'</span>
        <span class="token comment">// must be comptime-known, but index value is runtime-known</span>

        <span class="token comment">// 0...fields.len - 1 =>  @typeInfo(fields[field_index].type)</span>
        <span class="token comment">//    == .Optional,</span>

        <span class="token comment">// This prong is analyzed `fields.len - 1` times with `idx`</span>
        <span class="token comment">// being a unique comptime-known value each time.</span>
        <span class="token keyword">inline</span> <span class="token number">0</span><span class="token operator">...</span>fields<span class="token punctuation">.</span>len <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">=></span> <span class="token operator">|</span>idx<span class="token operator">|</span> <span class="token builtin">@typeInfo</span><span class="token punctuation">(</span>fields<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin-type keyword">type</span><span class="token punctuation">)</span>
            <span class="token operator">==</span> <span class="token punctuation">.</span>Optional<span class="token punctuation">,</span>
        <span class="token keyword">else</span> <span class="token operator">=></span> <span class="token keyword">return</span> <span class="token keyword">error</span><span class="token punctuation">.</span>IndexOutOfBounds<span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">const</span> <span class="token class-name">Struct1</span> <span class="token operator">=</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span> a<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u32</span></span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token operator">?</span><span class="token builtin-type keyword">u32</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token function">isFieldOptional</span><span class="token punctuation">(</span>Struct1<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token function">isFieldOptional</span><span class="token punctuation">(</span>Struct1<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token comment">// Inline switch, to obtain the union's enum tag value</span>
<span class="token keyword">const</span> <span class="token class-name">U</span> <span class="token operator">=</span> <span class="token keyword">union</span><span class="token punctuation">(</span><span class="token keyword">enum</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    a<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u32</span></span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">f32</span></span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">fn</span> <span class="token function">getNum</span><span class="token punctuation">(</span>u<span class="token punctuation">:</span> <span class="token class-name">U</span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">u32</span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>u<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// 'inline else' let the compiler to check every possible case</span>
        <span class="token comment">// 'tag' is to obtain the union's enum tag value</span>
        <span class="token keyword">inline</span> <span class="token keyword">else</span> <span class="token operator">=></span> <span class="token operator">|</span>num<span class="token punctuation">,</span> tag<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>tag <span class="token operator">==</span> <span class="token punctuation">.</span>b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">return</span> <span class="token builtin">@intFromFloat</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token keyword">return</span> num<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">var</span> u <span class="token operator">=</span> <span class="token class-name">U</span><span class="token punctuation">&#123;</span> <span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">42</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
_ <span class="token operator">=</span> <span class="token function">getNum</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">42</span><span class="token punctuation">;</span> <span class="token comment">// true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="while"><a href="#while" class="headerlink" title="while"></a>while</h2><pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token keyword">continue</span><span class="token punctuation">;</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// with a continue expression</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>

<span class="token comment">// with a more complicated continue expression</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">*</span> j <span class="token operator">&lt;</span> <span class="token number">2000</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span> i <span class="token operator">*=</span> <span class="token number">2</span><span class="token punctuation">;</span> j <span class="token operator">*=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// break a loop and return a value</span>
<span class="token keyword">fn</span> <span class="token function">rangeHasNumber</span><span class="token punctuation">(</span>begin<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">usize</span></span><span class="token punctuation">,</span> end<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">usize</span></span><span class="token punctuation">,</span> number<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">usize</span></span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">bool</span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> i <span class="token operator">=</span> begin<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> end<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> number<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// break, like return, accepts a value parameter</span>
            <span class="token keyword">break</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token comment">// When you break from a while loop, the else branch is not</span>
    <span class="token comment">// evaluated. otherwise, it will be executed when the condition</span>
    <span class="token comment">// of the while loop is tested as false.</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Labeled while, to use 'break'</span>
<span class="token label">outer</span><span class="token punctuation">:</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">break</span> <span class="token punctuation">:</span><span class="token label">outer</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Labeled while, to use 'continue'</span>
<span class="token label">outer</span><span class="token punctuation">:</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">continue</span> <span class="token punctuation">:</span><span class="token label">outer</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// With optionals</span>
<span class="token keyword">var</span> numbers_left<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u32</span></span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">// ?u32, an optional: u32 or null</span>
<span class="token keyword">fn</span> <span class="token function">eventuallyNullSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token class-name"><span class="token operator">?</span><span class="token builtin-type keyword">u32</span></span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// Zig style "if...else"</span>
    <span class="token keyword">return</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>numbers_left <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">null</span> <span class="token keyword">else</span> <span class="token label">blk</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
        numbers_left <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span> <span class="token punctuation">:</span><span class="token label">blk</span> numbers_left<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">var</span> sum<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u32</span></span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">// When the |x| syntax is present, the while condition must be</span>
<span class="token comment">// an optional.</span>
<span class="token comment">// The loop exits when null is encountered.</span>
<span class="token comment">// |value| captures the return value of eventuallyNullSequence()</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">eventuallyNullSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">|</span>value<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    sum <span class="token operator">+=</span> value<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// will be here on the first null value encountered</span>
    <span class="token comment">// sum == 3</span>
    <span class="token comment">//...</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// while with Error Unions</span>

<span class="token keyword">const</span> expect <span class="token operator">=</span> <span class="token builtin">@import</span><span class="token punctuation">(</span><span class="token string">"std"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>testing<span class="token punctuation">.</span>expect<span class="token punctuation">;</span>

<span class="token keyword">test</span> <span class="token string">"while error union capture"</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> sum1<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u32</span></span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    numbers_left <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token comment">// the condition is an error union</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">eventuallyErrorSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">|</span>value<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
        sum1 <span class="token operator">+=</span> value<span class="token punctuation">;</span>
    <span class="token comment">// capturing the error, the loop is finished</span>
    <span class="token comment">// "else |x|" syntax is present, the while condition must have</span>
    <span class="token comment">// an Error Union Type</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token operator">|</span>err<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">try</span> <span class="token function">expect</span><span class="token punctuation">(</span>err <span class="token operator">==</span> <span class="token keyword">error</span><span class="token punctuation">.</span>ReachedZero<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">var</span> numbers_left<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u32</span></span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

<span class="token comment">// !u32, not ?u32, they are different</span>
<span class="token comment">// !u32 is an error union</span>
<span class="token keyword">fn</span> <span class="token function">eventuallyErrorSequence</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token class-name"><span class="token operator">!</span><span class="token builtin-type keyword">u32</span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>numbers_left <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">error</span><span class="token punctuation">.</span>ReachedZero <span class="token keyword">else</span> <span class="token label">blk</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
        numbers_left <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span> <span class="token punctuation">:</span><span class="token label">blk</span> numbers_left<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#inline-while">inline while</a> causes the loop to be <strong>unrolled</strong>, which allows the code to do some things which only work at compile time.</p>
<p>It is recommended to use inline loops only for one of these reasons:</p>
<ul>
<li><p>To execute at comptime for the semantics to work.</p>
</li>
<li><p>You have a benchmark to prove that forcibly unrolling the loop in this way is measurably faster.</p>
</li>
</ul>
<h2 id="for"><a href="#for" class="headerlink" title="for"></a>for</h2><pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// items can also be slice</span>
<span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token class-name"><span class="token punctuation">[</span>_<span class="token punctuation">]</span><span class="token builtin-type keyword">i32</span></span> <span class="token punctuation">&#123;</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> items2 <span class="token operator">=</span> <span class="token class-name"><span class="token punctuation">[</span>_<span class="token punctuation">]</span><span class="token builtin-type keyword">i32</span></span> <span class="token punctuation">&#123;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span>items<span class="token punctuation">)</span> <span class="token operator">|</span>value<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// items[3] is not included</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>items<span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">..</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">|</span>value<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// "i" is the index</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>items<span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">..</span><span class="token punctuation">)</span> <span class="token operator">|</span>v<span class="token punctuation">,</span> i<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// To iterate over consecutive integers.</span>
<span class="token comment">// 3 is not included</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">..</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">|</span>i<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Iterate over multiple objects.</span>
<span class="token comment">// The length of items and items2 must be equal at the start of the loop</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>items<span class="token punctuation">,</span> items2<span class="token punctuation">)</span> <span class="token operator">|</span>v1<span class="token punctuation">,</span> v2<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// "value" is a pointer</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>items<span class="token punctuation">)</span> <span class="token operator">|</span><span class="token operator">*</span>value<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// For loops can also be used as expressions</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">for</span> <span class="token punctuation">(</span>items<span class="token punctuation">)</span> <span class="token operator">|</span>value<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Labeled for</span>
<span class="token keyword">var</span> count<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">usize</span></span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
outer<span class="token punctuation">:</span> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">|</span>_<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">..</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">|</span>_<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
        count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span> <span class="token punctuation">:</span><span class="token label">outer</span><span class="token punctuation">;</span>
        <span class="token comment">// continue :outer;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#inline-for">inline for</a> is like <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#inline-while">inline while</a>.</p>
<h2 id="if"><a href="#if" class="headerlink" title="if"></a>if</h2><pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// If expressions have three types:</span>
<span class="token comment">// bool</span>
<span class="token comment">// ?T</span>
<span class="token comment">// anyerror!T</span>

<span class="token comment">// To be used as expressions.</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">!=</span> b<span class="token punctuation">)</span> <span class="token number">47</span> <span class="token keyword">else</span> <span class="token number">3089</span><span class="token punctuation">;</span>

<span class="token comment">// if boolean</span>
<span class="token keyword">const</span> a<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u32</span></span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u32</span></span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">!=</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">unreachable</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">unreachable</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// if optional</span>
<span class="token keyword">var</span> c<span class="token punctuation">:</span> <span class="token class-name"><span class="token operator">?</span><span class="token builtin-type keyword">u32</span></span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">|</span>value<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">// Access the value by reference using a pointer capture.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">|</span><span class="token operator">*</span>value<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    value<span class="token operator">.*</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// if error union</span>
<span class="token keyword">const</span> a<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">anyerror</span><span class="token operator">!</span><span class="token builtin-type keyword">u32</span></span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">|</span>value<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token operator">|</span>err<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// The else and |err| capture is strictly required.</span>
    _ <span class="token operator">=</span> err<span class="token punctuation">;</span>
    <span class="token keyword">unreachable</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">|</span>value<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token operator">|</span>_<span class="token operator">|</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">|</span><span class="token operator">*</span>value<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    value<span class="token operator">.*</span> <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token operator">|</span>_<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">unreachable</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// if error union with optional</span>
<span class="token keyword">const</span> a<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">anyerror</span><span class="token operator">!</span><span class="token operator">?</span><span class="token builtin-type keyword">u32</span></span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">|</span>optional_value<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// optional_value.? == 0</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token operator">|</span>_<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">unreachable</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// a pointer capture</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">|</span><span class="token operator">*</span>optional_value<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>optional_value<span class="token operator">.*</span><span class="token punctuation">)</span> <span class="token operator">|</span><span class="token operator">*</span>value<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
        value<span class="token operator">.*</span> <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token operator">|</span>_<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">unreachable</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// combining if and switch</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">parseU64</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">|</span>number<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token operator">|</span>err<span class="token operator">|</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h2><pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">const</span> std <span class="token operator">=</span> <span class="token builtin">@import</span><span class="token punctuation">(</span><span class="token string">"std"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> print <span class="token operator">=</span> std<span class="token punctuation">.</span>debug<span class="token punctuation">.</span>print<span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function">deferErrorExample</span><span class="token punctuation">(</span>is_error<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">bool</span></span><span class="token punctuation">)</span> <span class="token class-name"><span class="token operator">!</span><span class="token builtin-type keyword">void</span></span> <span class="token punctuation">&#123;</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\nstart of function\n"</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// This will always be executed on exit</span>
    <span class="token keyword">defer</span> <span class="token punctuation">&#123;</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"end of function\n"</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">// This will only be executed if the scope returns with an error</span>
    <span class="token keyword">errdefer</span> <span class="token punctuation">&#123;</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"encountered an error!\n"</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>is_error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token keyword">error</span><span class="token punctuation">.</span>DeferError<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">fn</span> <span class="token function">deferErrorCaptureExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token class-name"><span class="token operator">!</span><span class="token builtin-type keyword">void</span></span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// get additional error message</span>
    <span class="token keyword">errdefer</span> <span class="token operator">|</span>err<span class="token operator">|</span> <span class="token punctuation">&#123;</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"the error is &#123;s&#125;\n"</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">&#123;</span><span class="token builtin">@errorName</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">return</span> <span class="token keyword">error</span><span class="token punctuation">.</span>DeferError<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">test</span> <span class="token string">"errdefer unwinding"</span> <span class="token punctuation">&#123;</span>
    <span class="token function">deferErrorExample</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token keyword">catch</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
    <span class="token function">deferErrorExample</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token keyword">catch</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
    <span class="token function">deferErrorCaptureExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">catch</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>If multiple defer statements are specified, they will be executed in the <strong>reverse order</strong> they were run.</p>
<p>Inside a defer expression <strong>the return statement is not allowed</strong>.</p>
<h2 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h2><pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// The export specifier makes a function externally visible in the</span>
<span class="token comment">// generated object file, and makes it use the C ABI.</span>
<span class="token keyword">export</span> <span class="token keyword">fn</span> <span class="token function">sub</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i8</span></span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i8</span></span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">i8</span></span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>

<span class="token comment">// The extern specifier is used to declare a function that will be</span>
<span class="token comment">// resolved at link time</span>
<span class="token comment">// "c" specifies the library that has the function. ("c" -> libc.so)</span>
<span class="token keyword">extern</span> <span class="token string">"c"</span> <span class="token keyword">fn</span> <span class="token function">atan2</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">f64</span></span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">f64</span></span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">f64</span></span><span class="token punctuation">;</span>

<span class="token comment">// The inline calling convention forces a function to be inlined at all</span>
<span class="token comment">// call sites.</span>
<span class="token comment">// If the function cannot be inlined, it is a compile-time error.</span>
<span class="token keyword">fn</span> <span class="token function">shiftLeftOne</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u32</span></span><span class="token punctuation">)</span> <span class="token function">callconv</span><span class="token punctuation">(</span><span class="token punctuation">.</span>Inline<span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">u32</span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> a <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// The pub specifier allows the function to be visible when importing.</span>
<span class="token comment">// Another file can use @import and call sub2</span>
<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">sub2</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i8</span></span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i8</span></span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">i8</span></span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>

<span class="token comment">// Function pointers are prefixed with `*const `.</span>
<span class="token keyword">const</span> Call2Op <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">const</span> <span class="token keyword">fn</span> <span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i8</span></span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i8</span></span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">i8</span></span><span class="token punctuation">;</span>
<span class="token keyword">fn</span> <span class="token function">doOp</span><span class="token punctuation">(</span>fnCall<span class="token punctuation">:</span> <span class="token class-name">Call2Op</span><span class="token punctuation">,</span> op1<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i8</span></span><span class="token punctuation">,</span> op2<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i8</span></span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">i8</span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">fnCall</span><span class="token punctuation">(</span>op1<span class="token punctuation">,</span> op2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>Primitive types such as <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#Integers">Integers</a> and <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#Floats">Floats</a> passed as parameters are copied.</p>
<p>When Structs, unions, and arrays are passed as parameters, Zig may choose to copy and pass by value, or pass by reference, whichever way Zig decides will be faster.</p>
<p>For extern functions, Zig follows the C ABI for passing structs and unions by value.</p>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">//  "anytype" will be inferred when the function is called.</span>
<span class="token keyword">fn</span> <span class="token function">addFortyTwo</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">anytype</span><span class="token punctuation">)</span> <span class="token builtin">@TypeOf</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Errors"><a href="#Errors" class="headerlink" title="Errors"></a>Errors</h2><pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// "number" is the returned value of parseU64(), or the default </span>
<span class="token comment">// value: 13</span>
<span class="token keyword">const</span> number <span class="token operator">=</span> <span class="token function">parseU64</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">catch</span> <span class="token number">13</span><span class="token punctuation">;</span>
<span class="token comment">// using named block</span>
<span class="token keyword">const</span> number <span class="token operator">=</span> <span class="token function">parseU64</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">catch</span> <span class="token label">blk</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// do things</span>
    <span class="token keyword">break</span> <span class="token punctuation">:</span><span class="token label">blk</span> <span class="token number">13</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// if the expression will never be an error</span>
<span class="token keyword">const</span> number <span class="token operator">=</span> <span class="token function">parseU64</span><span class="token punctuation">(</span><span class="token string">"1234"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">catch</span> <span class="token keyword">unreachable</span><span class="token punctuation">;</span>

<span class="token comment">// The following two are equal</span>
<span class="token comment">// return an error or continue</span>
<span class="token keyword">const</span> number <span class="token operator">=</span> <span class="token function">parseU64</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">catch</span> <span class="token operator">|</span>err<span class="token operator">|</span> <span class="token keyword">return</span> err<span class="token punctuation">;</span>
<span class="token keyword">const</span> number <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token function">parseU64</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Casting"><a href="#Casting" class="headerlink" title="Casting"></a>Casting</h2><pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">var</span> a<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u8</span></span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">// type coercion - @as builtin</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token builtin">@as</span><span class="token punctuation">(</span><span class="token builtin-type keyword">u16</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// error: ambiguous coercion of division operands 'comptime_float'</span>
<span class="token comment">// and 'comptime_int'; non-zero remainder '4'</span>
<span class="token keyword">var</span> f<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">f32</span></span> <span class="token operator">=</span> <span class="token number">54.0</span> <span class="token operator">/</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token comment">// OK</span>
<span class="token keyword">var</span> f<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">f32</span></span> <span class="token operator">=</span> <span class="token number">54.0</span> <span class="token operator">/</span> <span class="token builtin">@as</span><span class="token punctuation">(</span><span class="token builtin-type keyword">f32</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token class-name"><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">const</span> <span class="token builtin-type keyword">u8</span></span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token class-name"><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin-type keyword">u8</span></span><span class="token punctuation">&#123;</span> <span class="token char">'h'</span><span class="token punctuation">,</span> <span class="token char">'e'</span><span class="token punctuation">,</span> <span class="token char">'l'</span><span class="token punctuation">,</span> <span class="token char">'l'</span><span class="token punctuation">,</span> <span class="token number">111</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">anyerror</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">const</span> <span class="token builtin-type keyword">u8</span></span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token class-name"><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin-type keyword">u8</span></span><span class="token punctuation">&#123;</span> <span class="token char">'h'</span><span class="token punctuation">,</span> <span class="token char">'e'</span><span class="token punctuation">,</span> <span class="token char">'l'</span><span class="token punctuation">,</span> <span class="token char">'l'</span><span class="token punctuation">,</span> <span class="token number">111</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token class-name"><span class="token operator">?</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">const</span> <span class="token builtin-type keyword">u8</span></span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token class-name"><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin-type keyword">u8</span></span><span class="token punctuation">&#123;</span> <span class="token char">'h'</span><span class="token punctuation">,</span> <span class="token char">'e'</span><span class="token punctuation">,</span> <span class="token char">'l'</span><span class="token punctuation">,</span> <span class="token char">'l'</span><span class="token punctuation">,</span> <span class="token number">111</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> buf<span class="token punctuation">:</span> <span class="token class-name"><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin-type keyword">u8</span></span> <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token operator">.*</span><span class="token punctuation">;</span>
<span class="token comment">// the array length becomes the slice length</span>
<span class="token keyword">const</span> x<span class="token punctuation">:</span> <span class="token class-name"><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin-type keyword">u8</span></span> <span class="token operator">=</span> <span class="token operator">&amp;</span>buf<span class="token punctuation">;</span>
<span class="token comment">// Single-item pointers to arrays can be coerced to many-item pointers.</span>
<span class="token keyword">const</span> x2<span class="token punctuation">:</span> <span class="token class-name"><span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">]</span><span class="token builtin-type keyword">u8</span></span> <span class="token operator">=</span> <span class="token operator">&amp;</span>buf<span class="token punctuation">;</span>
<span class="token keyword">const</span> x3<span class="token punctuation">:</span> <span class="token class-name"><span class="token operator">?</span><span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">]</span><span class="token builtin-type keyword">u8</span></span> <span class="token operator">=</span> <span class="token operator">&amp;</span>buf<span class="token punctuation">;</span>

<span class="token comment">// Single-item pointers can be cast to len-1 single-item arrays.</span>
<span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token number">1234</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> y<span class="token punctuation">:</span> <span class="token class-name"><span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token operator">&amp;</span>x<span class="token punctuation">;</span>
<span class="token keyword">const</span> z<span class="token punctuation">:</span> <span class="token class-name"><span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">]</span><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> y<span class="token punctuation">;</span>

<span class="token comment">// optionals wrapped in error union</span>
<span class="token keyword">const</span> x<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">anyerror</span><span class="token operator">!</span><span class="token operator">?</span><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token number">1234</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> y<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">anyerror</span><span class="token operator">!</span><span class="token operator">?</span><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">try</span> x<span class="token punctuation">)</span><span class="token operator">.?</span> <span class="token operator">==</span> <span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">try</span> y<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="comptime"><a href="#comptime" class="headerlink" title="comptime"></a>comptime</h2><ul>
<li><p>Compile-time Parameters</p>
</li>
<li><p>Compile-time Variables</p>
</li>
<li><p>Compile-time Expressions</p>
</li>
</ul>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// Compile-time Parameters</span>

<span class="token keyword">fn</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token keyword">comptime</span> T<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">type</span></span><span class="token punctuation">,</span> a<span class="token punctuation">:</span> <span class="token class-name">T</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token class-name">T</span><span class="token punctuation">)</span> <span class="token class-name">T</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">></span> b<span class="token punctuation">)</span> a <span class="token keyword">else</span> b<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">fn</span> <span class="token function">gimmeTheBiggerFloat</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">f32</span></span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">f32</span></span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">f32</span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token builtin-type keyword">f32</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">fn</span> <span class="token function">gimmeTheBiggerInteger</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u64</span></span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u64</span></span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">u64</span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token builtin-type keyword">u64</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>In Zig, types are first-class citizens. They can be assigned to variables, passed as parameters to functions, and returned from functions. However, they can only be used in expressions which are known at compile-time.</p>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token comment">// Compile-time Variables</span>

<span class="token keyword">const</span> expect <span class="token operator">=</span> <span class="token builtin">@import</span><span class="token punctuation">(</span><span class="token string">"std"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>testing<span class="token punctuation">.</span>expect<span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token class-name">CmdFn</span> <span class="token operator">=</span> <span class="token keyword">struct</span> <span class="token punctuation">&#123;</span>
    name<span class="token punctuation">:</span> <span class="token class-name"><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">const</span> <span class="token builtin-type keyword">u8</span></span><span class="token punctuation">,</span>
    func<span class="token punctuation">:</span> <span class="token keyword">fn</span><span class="token punctuation">(</span><span class="token builtin-type keyword">i32</span><span class="token punctuation">)</span> <span class="token builtin-type keyword">i32</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> cmd_fns <span class="token operator">=</span> <span class="token class-name"><span class="token punctuation">[</span>_<span class="token punctuation">]</span>CmdFn</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">CmdFn</span> <span class="token punctuation">&#123;</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"one"</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>func <span class="token operator">=</span> one<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token class-name">CmdFn</span> <span class="token punctuation">&#123;</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"two"</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>func <span class="token operator">=</span> two<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token class-name">CmdFn</span> <span class="token punctuation">&#123;</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"three"</span><span class="token punctuation">,</span> <span class="token punctuation">.</span>func <span class="token operator">=</span> three<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">fn</span> <span class="token function">one</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>
<span class="token keyword">fn</span> <span class="token function">two</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> value <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>
<span class="token keyword">fn</span> <span class="token function">three</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> value <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>

<span class="token keyword">fn</span> <span class="token function">performFn</span><span class="token punctuation">(</span><span class="token keyword">comptime</span> prefix_char<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">u8</span></span><span class="token punctuation">,</span> start_value<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> result<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> start_value<span class="token punctuation">;</span>
    <span class="token keyword">comptime</span> <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// Because of inline while, the function performFn is generated</span>
    <span class="token comment">// three different times, for the different values of prefix_char</span>
    <span class="token comment">// provided</span>
    <span class="token keyword">inline</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> cmd_fns<span class="token punctuation">.</span>len<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cmd_fns<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> prefix_char<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            result <span class="token operator">=</span> cmd_fns<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">test</span> <span class="token string">"perform fn"</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">try</span> <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">performFn</span><span class="token punctuation">(</span><span class="token char">'t'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">performFn</span><span class="token punctuation">(</span><span class="token char">'o'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">performFn</span><span class="token punctuation">(</span><span class="token char">'w'</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>In Zig, the programmer can label variables as <code>comptime</code>. This guarantees to the compiler that every load and store of the variable is performed at compile-time.</p>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">const</span> first_25_primes <span class="token operator">=</span> <span class="token function">firstNPrimes</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sum_of_first_25_primes <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>first_25_primes<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function">firstNPrimes</span><span class="token punctuation">(</span><span class="token keyword">comptime</span> n<span class="token punctuation">:</span> <span class="token class-name"><span class="token builtin-type keyword">usize</span></span><span class="token punctuation">)</span> <span class="token class-name"><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token builtin-type keyword">i32</span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> prime_list<span class="token punctuation">:</span> <span class="token class-name"><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token builtin-type keyword">i32</span></span> <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">fn</span> <span class="token function">sum</span><span class="token punctuation">(</span>numbers<span class="token punctuation">:</span> <span class="token class-name"><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">const</span> <span class="token builtin-type keyword">i32</span></span><span class="token punctuation">)</span> <span class="token class-name"><span class="token builtin-type keyword">i32</span></span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">test</span> <span class="token string">"variable values"</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">try</span> <span class="token builtin">@import</span><span class="token punctuation">(</span><span class="token string">"std"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>testing<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>sum_of_first_25_primes <span class="token operator">==</span> <span class="token number">1060</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>At <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#Containers">container</a> level (outside of any function), all expressions are implicitly <code>comptime</code> expressions.</p>
<p>This means that we can use functions to initialize complex static data.</p>
<h2 id="Memory"><a href="#Memory" class="headerlink" title="Memory"></a>Memory</h2><p>Memory allocators:</p>
<ul>
<li><p><code>std.heap.c_allocator</code></p>
<p>Use it when you link to libc.</p>
</li>
<li><p><code>std.heap.FixedBufferAllocator</code> or <code>std.heap.ThreadSafeFixedBufferAllocator</code></p>
<p>Use it when you know the maximum number of bytes at compile-time.</p>
</li>
<li><p><code>std.heap.ArenaAllocator</code></p>
<p>Use it most of the time.</p>
<pre class="line-numbers language-zig" data-language="zig"><code class="language-zig"><span class="token keyword">const</span> std <span class="token operator">=</span> <span class="token builtin">@import</span><span class="token punctuation">(</span><span class="token string">"std"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token class-name"><span class="token operator">!</span><span class="token builtin-type keyword">void</span></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> arena <span class="token operator">=</span> std<span class="token punctuation">.</span>heap<span class="token punctuation">.</span>ArenaAllocator<span class="token punctuation">.</span>
                    <span class="token function">init</span><span class="token punctuation">(</span>std<span class="token punctuation">.</span>heap<span class="token punctuation">.</span>page_allocator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">defer</span> arena<span class="token punctuation">.</span><span class="token function">deinit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> allocator <span class="token operator">=</span> arena<span class="token punctuation">.</span><span class="token function">allocator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> ptr <span class="token operator">=</span> <span class="token keyword">try</span> allocator<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token builtin-type keyword">i32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token punctuation">.</span>debug<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"ptr=&#123;*&#125;\n"</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">&#123;</span>ptr<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p><code>std.testing.FailingAllocator</code></p>
<p>Use it when writing a test and making sure <code>error.OutOfMemory</code> is handled correctly.</p>
</li>
<li><p><code>std.testing.allocator</code></p>
<p>Use it when writing a test.</p>
</li>
<li><p><code>std.heap.GeneralPurposeAllocator</code></p>
<p>If none of the above apply, you need a general purpose allocator.</p>
</li>
</ul>
<p><code>var</code> declarations inside functions are stored in the function’s stack frame. Once a function returns, any <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#Pointers">Pointers</a> to variables in the function’s stack frame become invalid references</p>
<p><code>var</code> declarations at the top level or in <a target="_blank" rel="noopener" href="https://ziglang.org/documentation/master/#struct">struct</a> declarations are stored in the global data section.</p>
<p>The location of memory allocated with <code>allocator.alloc</code> or <code>allocator.create</code> is determined by the allocator’s implementation.</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/archives/">Writing</a></li>
        
          <li><a href="/categories/">Categories</a></li>
        
          <li><a href="/tags/">Tags</a></li>
        
          <li><a href="/about/">About</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Hello-World"><span class="toc-number">1.</span> <span class="toc-text">Hello, World</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Zig-Test"><span class="toc-number">2.</span> <span class="toc-text">Zig Test</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Comments"><span class="toc-number">3.</span> <span class="toc-text">Comments</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Integers"><span class="toc-number">4.</span> <span class="toc-text">Integers</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Floats"><span class="toc-number">5.</span> <span class="toc-text">Floats</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#String"><span class="toc-number">6.</span> <span class="toc-text">String</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Optionals"><span class="toc-number">7.</span> <span class="toc-text">Optionals</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Assignment"><span class="toc-number">8.</span> <span class="toc-text">Assignment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Operators"><span class="toc-number">9.</span> <span class="toc-text">Operators</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Arrays"><span class="toc-number">10.</span> <span class="toc-text">Arrays</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Slices"><span class="toc-number">11.</span> <span class="toc-text">Slices</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vectors"><span class="toc-number">12.</span> <span class="toc-text">Vectors</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pointers"><span class="toc-number">13.</span> <span class="toc-text">Pointers</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#struct"><span class="toc-number">14.</span> <span class="toc-text">struct</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#enum"><span class="toc-number">15.</span> <span class="toc-text">enum</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#union"><span class="toc-number">16.</span> <span class="toc-text">union</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#opaque"><span class="toc-number">17.</span> <span class="toc-text">opaque</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Blocks"><span class="toc-number">18.</span> <span class="toc-text">Blocks</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shadowing"><span class="toc-number">19.</span> <span class="toc-text">Shadowing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Variables"><span class="toc-number">20.</span> <span class="toc-text">Variables</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#switch"><span class="toc-number">21.</span> <span class="toc-text">switch</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#while"><span class="toc-number">22.</span> <span class="toc-text">while</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#for"><span class="toc-number">23.</span> <span class="toc-text">for</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#if"><span class="toc-number">24.</span> <span class="toc-text">if</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#defer"><span class="toc-number">25.</span> <span class="toc-text">defer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Functions"><span class="toc-number">26.</span> <span class="toc-text">Functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Errors"><span class="toc-number">27.</span> <span class="toc-text">Errors</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Casting"><span class="toc-number">28.</span> <span class="toc-text">Casting</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#comptime"><span class="toc-number">29.</span> <span class="toc-text">comptime</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Memory"><span class="toc-number">30.</span> <span class="toc-text">Memory</span></a></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://lnxpgn.github.io/2023/12/03/zig/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://lnxpgn.github.io/2023/12/03/zig/&text=Getting Started with Zig for Developers Experienced with Other Languages"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://lnxpgn.github.io/2023/12/03/zig/&title=Getting Started with Zig for Developers Experienced with Other Languages"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://lnxpgn.github.io/2023/12/03/zig/&is_video=false&description=Getting Started with Zig for Developers Experienced with Other Languages"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Getting Started with Zig for Developers Experienced with Other Languages&body=Check out this article: https://lnxpgn.github.io/2023/12/03/zig/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://lnxpgn.github.io/2023/12/03/zig/&title=Getting Started with Zig for Developers Experienced with Other Languages"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://lnxpgn.github.io/2023/12/03/zig/&title=Getting Started with Zig for Developers Experienced with Other Languages"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://lnxpgn.github.io/2023/12/03/zig/&title=Getting Started with Zig for Developers Experienced with Other Languages"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://lnxpgn.github.io/2023/12/03/zig/&title=Getting Started with Zig for Developers Experienced with Other Languages"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://lnxpgn.github.io/2023/12/03/zig/&name=Getting Started with Zig for Developers Experienced with Other Languages&description=&lt;p&gt;The content is based on &lt;a href=&#34;https://ziglang.org/documentation/master/&#34;&gt;the official Zig documentation&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&#34;Hello-World&#34;&gt;&lt;a href=&#34;#Hello-World&#34; class=&#34;headerlink&#34; title=&#34;Hello, World&#34;&gt;&lt;/a&gt;Hello, World&lt;/h2&gt;&lt;pre class=&#34;line-numbers language-zig&#34; data-language=&#34;zig&#34;&gt;&lt;code class=&#34;language-zig&#34;&gt;&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; std &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;@import&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;std&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;token keyword&#34;&gt;pub&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;&lt;span class=&#34;token operator&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;token builtin-type keyword&#34;&gt;void&lt;/span&gt;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;
    &lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; stdout &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; std&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;io&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;getStdOut&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;writer&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;token keyword&#34;&gt;try&lt;/span&gt; stdout&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token function&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;Hello, &amp;#123;s&amp;#125;!\n&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;world&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span aria-hidden=&#34;true&#34; class=&#34;line-numbers-rows&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;!void&lt;/code&gt; tells the Zig compiler that the function will either return an error or a value. It is an error union, the full form is &lt;code&gt;&amp;lt;error set type&amp;gt;!&amp;lt;any data type&amp;gt;&lt;/code&gt;, combining an &lt;em&gt;Error Set Type&lt;/em&gt; (An error set is like an enum) and any other data type.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;!void&lt;/code&gt; , the error set type is not explicitly written on the left side of the &lt;code&gt;!&lt;/code&gt; operator. &lt;/p&gt;
&lt;p&gt;The &lt;a href=&#34;https://ziglang.org/documentation/master/#try&#34;&gt;try&lt;/a&gt; expression evaluates the result of &lt;code&gt;stdout.print&lt;/code&gt;. If the result is an error, then the &lt;code&gt;try&lt;/code&gt; expression will return from &lt;code&gt;main&lt;/code&gt; with the error. Otherwise, the program will continue. &lt;/p&gt;
&lt;pre class=&#34;line-numbers language-zig&#34; data-language=&#34;zig&#34;&gt;&lt;code class=&#34;language-zig&#34;&gt;&lt;span class=&#34;token comment&#34;&gt;// top-level declarations are order-independent&lt;/span&gt;
&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; print &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; std&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;debug&lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;print&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;token keyword&#34;&gt;const&lt;/span&gt; std &lt;span class=&#34;token operator&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;token builtin&#34;&gt;@import&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;std&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;

&lt;span class=&#34;token comment&#34;&gt;// std.debug.print cannot fail, so the return type is void, not !void&lt;/span&gt;
&lt;span class=&#34;token keyword&#34;&gt;pub&lt;/span&gt; &lt;span class=&#34;token keyword&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;token function&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;token class-name&#34;&gt;&lt;span class=&#34;token builtin-type keyword&#34;&gt;void&lt;/span&gt;&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;
    &lt;span class=&#34;token comment&#34;&gt;// must have &#34;.&amp;#123;&amp;#125;&#34;, std.debug.print needs two arguments&lt;/span&gt;
    &lt;span class=&#34;token function&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;token string&#34;&gt;&#34;Hello, world\n&#34;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;token punctuation&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#123;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;token punctuation&#34;&gt;;&lt;/span&gt;
&lt;span class=&#34;token punctuation&#34;&gt;&amp;#125;&lt;/span&gt;&lt;span aria-hidden=&#34;true&#34; class=&#34;line-numbers-rows&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://lnxpgn.github.io/2023/12/03/zig/&t=Getting Started with Zig for Developers Experienced with Other Languages"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2015-2025
    lnxpgn
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/categories/">Categories</a></li><!--
     --><!--
       --><li><a href="/tags/">Tags</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


  <link
    rel="stylesheet"
    href="/css/prism-default-line-numbers.css"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
